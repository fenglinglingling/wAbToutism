<!doctype html>
<html lang="en">
<head>
<title>TourX - Tours and Travel HTML Template</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- wow css -->
    <link rel="stylesheet" href="../static/css/animate.css">
    <!-- magnific popup -->
    <link rel="stylesheet" href="../static/css/magnific-popup.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <!-- Boxicons CSS -->
    <link rel="stylesheet" href="../static/css/boxicons.min.css">
    <!-- Icon Font CSS -->
    <link rel="stylesheet" href="../static/css/flaticon.css">
    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="../static/css/owl.carousel.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="../static/css/responsive.css">

</head>
<body>

     <!-- Start Preloader Area -->
<!--     <div class="preloader">-->
<!--        <div class="preloader-wrap">-->
<!--            <div class="preloader-logo">-->
<!--                <img src="../static/picture/logo.png" alt="" class="img-fluid">-->
<!--            </div>-->
<!--           <div class="plane-path">-->
<!--               <img src="../static/picture/Plane.png" alt="" class="animi-plane">-->
<!--           </div>-->
<!--        </div>-->
<!--    </div>-->
    <!-- End Preloader Area -->
     
     <!-- =============== Topbar area start =============== -->

    <!-- =============== Topbar area end =============== -->
   


    <!-- ===============  header area start =============== -->

    <!-- ===============  header area end =============== -->
    
    <!-- ===============  breadcrumb area start =============== -->
    <div class="breadcrumb-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="breadcrumb-wrap">
                        <h2>Blog details</h2>
                        <ul class="breadcrumb-links">
                            <li>
                                <a href="index.html">Home</a>
                                <i class="bx bx-chevron-right"></i>
                            </li>
                            <li>Blog Details</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ===============  breadcrumb area end =============== -->
    
    <!-- ===============  Blog wrapper area start =============== -->
    <div class="blog-details-wrapper pt-90">
        <div class="container">
           <div class="row">
            <div class="col-lg-8">
                <div class="blog-details">
                    <div class="blog-title-xl">
                        <h3 id="huatiTitle">Donec egestas orci viverraDonec egestas orci viverr
                            fermentum risus.</h3>
                        <div class="blog-info-xl">
                            <a id="userName" class="blog-writer" href="#"><i class="flaticon-user"></i>Dina Jems</a>
                            <a class="blog-writer" href="#"><img src="../static/myPicture/read.png"><span id="huatiRead">3</span></a>
                            <a class="blog-comment" href="#"><i class="flaticon-comment"></i>(<span id="commentCount">3</span>)Comment</a>

                        </div>
                    </div>
                    <div class="blog-img-xl">
                        <img src="../static/picture/bd.png" alt="" class="img-fluid">
                        <div id="time" class="blog-date"><i class="flaticon-calendar"></i> 1 April, 2021</div>
                    </div>
                    <div id="intrl" class="blog-texts mt-30">

                    </div>


                    <div class="blog-bottom">
                        <div class="blog-tags">
                            <h5>tags:</h5>
                            <ul>
<!--                                <li><button id="dianzan" type="button">点赞</button><span id="dianzanCount"></span></li>-->
                                <li><a id="dianzan1" style="display: block" href="javascript:void(0)">点赞(<span id="dianzanCount1"></span>)</a>
                                    <a id="dianzan2" style="display: none" href="javascript:void(0)">点赞(<span id="dianzanCount2"></span>)</a>
                                </li>
<!--                                <li><a href="#">Tourist</a></li>-->
                            </ul>
                        </div>
<!--                        <div class="blog-social">-->
<!--                            <ul>-->
<!--                                <li>-->
<!--                                    <a href="#"><i class='bx bxl-instagram'></i></a>-->
<!--                                    <a href="#"><i class='bx bxl-facebook'></i></a>-->
<!--                                    <a href="#"><i class='bx bxl-twitter'></i></a>-->
<!--                                    <a href="#"><i class='bx bxl-whatsapp'></i></a>-->
<!--                                </li>-->
<!--                            </ul>-->
<!--                        </div>-->
                    </div>

                    <div id="divComment" class="blog-comments">
<!--                        <h5><span id="Comments"></span> Comments</h5>-->

                    </div>

                    <div class="blog-reply">
                        <form>
                            <h5>Leave A Reply</h5>
                            <div class="row">
                                <div class="col-lg-6">
                                    <input type="text" id="leixing" value="comment" disabled="disabled" >
                                </div>
                                <div class="col-lg-6">
                                    <button id="zhuanHuan" type="button" onclick="return false" style="height: 50px;width: 80px">转换</button>
                                </div>
                                <div class="col-lg-12">
                                    <input type="text" id="cm" value="" hidden placeholder="Last Name">
                                </div>
                                <div class="col-lg-12">
                                    <input type="email" id="tp" value="" hidden placeholder="Your Email">
                                </div>
                                <div class="col-lg-12">
                                    <input type="text" id="us" value="" hidden placeholder="Subject">
                                </div>
                                <div class="col-lg-12">
                                    <textarea cols="30" id="ct" rows="7" placeholder="Write Message"></textarea><br>
                                </div>
                                <div class="col-lg-10">
                                    <button id="tiJiao" type="button">Submit Now</button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>


            <div class="col-lg-4">
                <div class="blog-sidebar">
                    <div class="sidebar-searchbox">
                        <div class="input-group search-box">
                            <input type="text" class="form-control" placeholder="Search Tour..." aria-label="Recipient's username" aria-describedby="button-addon2">
                            <button class="btn btn-outline-secondary" type="button" id="button-addon2"><i class='bx bx-paper-plane'></i></button>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12 col-md-6">
                            <div class="blog-categorie mt-40">
                                <h5 class="categorie-head">Categories</h5>
                                <ul>
                                    <li><a href="#"><i class='bx bxs-chevrons-right'></i> Adventure Tour</a></li>
                                    <li><a href="#"><i class='bx bxs-chevrons-right'></i> City Tour</a></li>
                                    <li><a href="#"><i class='bx bxs-chevrons-right'></i> Group Tour</a></li>
                                    <li><a href="#"><i class='bx bxs-chevrons-right'></i> Couple Tour</a></li>
                                    <li><a href="#"><i class='bx bxs-chevrons-right'></i> Village Tour</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-6">
                            <div class="blog-popular mt-40">
                                <h5 class="categorie-head">Popular Post</h5>
        
                                <ul>
                                    <li class="blog-card-sm">
                                        <div class="blog-img-sm">
                                            <img src="../static/picture/b-sm1.png" alt="">
                                        </div>
                                        <div class="blog-details-sm">
                                            <a href="" class="blog-title-sm">Lake Garda</a>
                                            <div class="blog-info">
                                                <a class="blog-writer" href="#">
                                                    <i class="flaticon-user"></i>
                                                    Dina Jems
                                                </a>
                                                <a href="#" class="blog-date"> <i class="flaticon-calendar"></i>  10 April, 2021</a>
                                                
                                            </div>
                                        </div>
                                    </li>
                                    <li class="blog-card-sm">
                                        <div class="blog-img-sm">
                                            <img src="../static/picture/b-sm2.png" alt="">
                                        </div>
                                        <div class="blog-details-sm">
                                            <a href="" class="blog-title-sm">Parish Hill</a>
                                            <div class="blog-info">
                                                <a class="blog-writer" href="#">
                                                    <i class="flaticon-user"></i>
                                                    Dina Jems
                                                </a>
                                                <a href="#" class="blog-date"> <i class="flaticon-calendar"></i>  10 April, 2021</a>
                                                
                                            </div>
                                        </div>
                                    </li>
                                    <li class="blog-card-sm">
                                        <div class="blog-img-sm">
                                            <img src="../static/picture/b-sm3.png" alt="">
                                        </div>
                                        <div class="blog-details-sm">
                                            <a href="" class="blog-title-sm">Mount Dtna</a>
                                            <div class="blog-info">
                                                <a class="blog-writer" href="#">
                                                    <i class="flaticon-user"></i>
                                                    Dina Jems
                                                </a>
                                                <a href="#" class="blog-date"> <i class="flaticon-calendar"></i>  10 April, 2021</a>
                                                
                                            </div>
                                        </div>
                                    </li>
                                    <li class="blog-card-sm">
                                        <div class="blog-img-sm">
                                            <img src="../static/picture/b-sm4.png" alt="">
                                        </div>
                                        <div class="blog-details-sm">
                                            <a href="" class="blog-title-sm">Lake Geneva</a>
                                            <div class="blog-info">
                                                <a class="blog-writer" href="#">
                                                    <i class="flaticon-user"></i>
                                                    Dina Jems
                                                </a>
                                                <a href="#" class="blog-date"> <i class="flaticon-calendar"></i>  10 April, 2021</a>
                                                
                                            </div>
                                        </div>
                                    </li>
                                    <li class="blog-card-sm">
                                        <div class="blog-img-sm">
                                            <img src="../static/picture/b-sm5.png" alt="">
                                        </div>
                                        <div class="blog-details-sm">
                                            <a href="" class="blog-title-sm">Franch Rivira</a>
                                            <div class="blog-info">
                                                <a class="blog-writer" href="#">
                                                    <i class="flaticon-user"></i>
                                                    Dina Jems
                                                </a>
                                                <a href="#" class="blog-date"> <i class="flaticon-calendar"></i>  10 April, 2021</a>
                                                
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-6">
                            <div class="blog-tag mt-40">
                                <h5 class="categorie-head">Tag Tour</h5>
                                <ul>
                                    <li><a href="#">Adventure</a></li>
                                    <li><a href="#">Trip</a></li>
                                    <li><a href="#">Guided</a></li>
                                    <li><a href="#">Historical</a></li>
                                    <li><a href="#">Road Trips</a></li>
                                    <li><a href="#">Tourist</a></li>
                                    <li><a href="#">Tourist</a></li>
                                    <li><a href="#">Selivia</a></li>
                                    <li><a href="#">Tour Guide</a></li>
                                    <li><a href="#">Cultural</a></li>
                                    <li><a href="#">Natural</a></li>
                                    <li><a href="#">Journey</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-6">
                            <div class="sidebar-banner mt-40">
                                <img src="../static/picture/sidebar-banner.png" alt="" class="img-fluid">
                                <div class="sidebar-banner-overlay">
                                    <div class="sidebar-content">
                                        <h3>Get 50% Off 
                                            In Dubai Tour</h3>
                                        <div class="sidebar-banner-btn">
                                            <a href="#">Book Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           </div>
        </div>
    </div>
     <!-- ===============  Blog wrapper area end =============== -->
    
    <!-- ===============  Newsletter area start =============== -->
    <div class="newsletter-area pt-120">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12">
                    <div class="newsletter-wrapper">
                        <h2>Subscribe To Our Newsletter 
                            For Latest Update</h2>
                        
                        <form>
                            <div class="input-group newsletter-input">
                                <input type="text" class="form-control" placeholder="Enter Your Email" aria-label="Recipient's username" aria-describedby="button-addon2">
                                <button class="btn btn-outline-secondary" type="button">Subscribe</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
     <!-- ===============  Newsletter area end =============== -->

    <!-- ==============  Footer area start================= -->
    <div class="footer-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-12">
                    <div class="footer-info">
                        <div class="footer-logo">
                            <img src="../static/picture/logo-2.png" alt="" class="img-fluid">
                        </div>
                        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aliquid maxime aut ut voluptate
                            dolorum nisi ducimus ratione</p>
                        <div class="footer-social-icons">
                            <h5>Follow Us:</h5>
                            <ul>
                                <li><a href="#"><i class='bx bxl-facebook'></i></a></li>
                                <li><a href="#"><i class='bx bxl-instagram'></i></a></li>
                                <li><a href="#"><i class='bx bxl-twitter'></i></a></li>
                                <li><a href="#"><i class='bx bxl-dribbble'></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-12">
                    <div class="row">
                        <div class="col-lg-5 col-md-5 col-sm-7">
                            <div class="footer-links">
                                <h5 class="widget-title">Contact us</h5>
                              
                                <div class="contact-box">
                                    <span><i class="bx bx-phone"></i></span>
                                    <div>
                                        <a href="tel:+01852-1265122">+01852-1265122</a>
                                        <a href="tel:+01852-1265122">+01852-1265122</a>
                                    </div>
                                </div>
                                <div class="contact-box">
                                    <span><i class="bx bx-mail-send"></i></span>
                                    <div>
                                        <a href="javascript:;"><span class="__cf_email__" data-cfemail="650c0b030a25001d04081509004b060a08">[email&#160;protected]</span></a>
                                        <a href="javascript:;"><span class="__cf_email__" data-cfemail="73000603031c010733160b121e031f165d101c1e">[email&#160;protected]</span></a>
                                    </div>
                                </div>
                                <div class="contact-box">
                                    <span><i class="bx bx-location-plus"></i></span>
                                    <div>
                                        <a href="#">2752 Willison Street <br>
                                            Eagan, United State</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-5">
                            <div class="footer-links">
                                <h5 class="widget-title">support</h5>
                                <div class="category-list">
                                    <ul>
                                        <li><a href="contact.html">Contact us</a></li>
                                        <li><a href="about.html">About us</a></li>
                                        <li><a href="#">Services</a></li>
                                        <li><a href="blog.html">our Blogs</a></li>
                                        <li><a href="#">terms and conditions</a></li>
                                    </ul>
                                 </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4">
                            <div class="footer-links payment-links">
                                <h5 class="widget-title">We Accepts:</h5>
                                <div class="payment-cards">
                                    <img src="../static/picture/payment-card-2.png" alt="" class="img-fluid">
                                    <img src="../static/picture/payment-card-1.png" alt="" class="img-fluid">
                                    <img src="../static/picture/payment-card-3.png" alt="" class="img-fluid">
                                    <img src="../static/picture/payment-card-4.png" alt="" class="img-fluid">
                                    <img src="../static/picture/payment-card-5.png" alt="" class="img-fluid">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
               <div class="col-lg-12">
                <div class="copyrigth-area">
                    <p>Copyright &copy; 2021.Company name All rights reserved.<a target="_blank" href="http://www.cssmoban.com/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
                </div>
               </div>
            </div>
            
        </div>
    </div>
    <!-- ==============  Footer area end================= -->



    <!--Javascript -->
    <script src="../static/js/jquery-3.6.0.min.js"></script>
    <script src="../static/js/owl.carousel.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="../static/js/jquery-ui.min.js"></script>
    <script src="../static/js/popper.min.js"></script>
    <script src="../static/js/jquery.magnific-popup.min.js"></script>
    <script src="../static/js/wow.min.js"></script>
     <script src="../static/js/typed.js"></script>
    <!-- Custom JavaScript -->
    <script src="../static/js/main.js"></script>

    
</body>
    <script type="text/javascript">
        // 获取当前文章的id
        var topicId=localStorage.topicId;
        //获取当前账号的id
        // var userId=localStorage.userId;
        var userId;
        // $.ajax({
        //     url:"getUserId",
        //     dataType:"json",
        //     success:function(res){
        //         userId=res.userId;
        //         alert(res);
        //     }
        // })

        $(function(){
            $.ajax({
                url:"getUserId",
                dataType:"json",
                success:function(res){
                    userId=res.userId;
                    //为回复输入框赋值
                    $("#us").attr("value",userId);
                }
            })
            //为发布评论输入框赋值
            $("#tp").attr("value",topicId);

            //通过文章id查询文章详情
            $.ajax({
                url:"selectHuatiById",
                data:{"id":topicId},
                dataType:"json",
                success:function(res){
                    console.log(res);
                    console.log(res.huati);
                    //为文章名字、时间、内容赋值
                    $("#huatiTitle").html(res.huati.title);
                    $("#time").html(res.huati.time);
                    $("#intrl").html(res.huati.introduction);
                    $("#huatiRead").html(res.huati.read);
                    //通过userId查询文章作者名并赋值
                    $.ajax({
                        url:"selectHuaTisFromUser",
                        data: {"id":res.huati.userId},
                        dataType:"json",
                        success:function(data){
                            $("#userName").html(data.abUser.userName);
                        }
                    });
                    loadComments();
                    dianzanType();




                }
            });
        });

        function loadComments(){
            //通过文章id查询所有评论
            $.ajax({
                url:"selectCommentByHuatiId",
                data:{"topic_id":topicId},
                dataType:"json",
                success:function (str){
                    //创建一个评论数结点
                    $("#divComment").append("<h5><span id=\"Comments\"></span> Comments</h5>");
                    //评论总数
                    $("#commentCount").html(str.comments.length);
                    $("#Comments").html(str.comments.length);

                    //循环出所有评论
                    $.each(str.comments,function (i,item){
                        var comment="<ul>\n" +
                            "                            <li>\n" +
                            "                                <div class=\"commentor\" onclick='inp("+item.commentsId+","+item.topicId+","+userId+")'>\n" +
                            "                                    <div class=\"commentotor-img\"><img src=\"../static/picture/c-1.png\" alt=\"\"></div>\n" +
                            "                                    <div class=\"commentor-id\">\n" +
                            "                                        <strong id=\"commentUserName"+i+"\">Jonson Hur</strong>\n" +
                            "                                        <p><span id=\"commentTime"+i+"\">2 April, 2021 </span></p>\n" +
                            "                                    </div>\n" +
                            "                                </div>\n" +
                            "                                <div class='row'>" +
                            "                                  <div class='col-md-11'>" +
                            "                                     <div id=\"commentContent"+i+"\" class=\"comment\">Morbi dictum pulvinar velit, id mollis lorem faucibus acUt sed lacinia ipsum. Suspendisse massa augue lorem faucibus acUt sed lacinia ipsum. Suspendisse </div>" +
                            "                                  </div>" +
                            "                                  <div class='col-md-1'>" +
                            "                                     <div class='row'>" +
                            "                                       <div class='col-md-6'>" +
                            "                                         <img src='../static/myPicture/点赞.png' id='commentDianzanA"+i+"' type='button' onclick='commentDianzanA("+item.commentsId+","+i+")' style='height: 20px;display: block'/>" +
                            "                                         <img src='../static/myPicture/点赞1.png' id='commentDianzanB"+i+"' type='button' onclick='commentDianzanB("+item.commentsId+","+i+")' style='height: 20px;display: none'/>" +
                            "                                       </div>" +
                            "                                       <div class='col-md-6'>" +
                            "                                       (<span id='commentDianzanCount"+i+"'>0</span>)" +
                            "                                       </div>" +
                            "                                    </div> " +
                            "                                  </div><hr style='color: #20c997'/> " +
                            "                                  \n" +
                            "                                  <div id='replySpace"+i+"' class='col-md-12'>" +
                            "                                  </div>" +
                            "                               </div>\n" +
                            "                            </li>\n" +
                            "                        </ul>";
                        $("#divComment").append(comment);
                        console.log(item);
                        //为评论时间和评论内容赋值
                        $("#commentTime"+i).html(item.time);
                        $("#commentContent"+i).html(item.content);
                        //通过userId获取评论人姓名
                        $.ajax({
                            url:"selectHuaTisFromUser",
                            data: {"id":item.userId},
                            dataType:"json",
                            success:function(data){
                                $("#commentUserName"+i).html(data.abUser.userName);
                            }
                        });
                        //加载评论的点赞量
                        dianzanCommentType(item.commentsId,i);

                        //加载回复
                        $.ajax({
                           url:"selectHuiFuByCommentId",
                           data:{"comments_id":item.commentsId},
                           dataType:"json",
                           success:function(cm){
                               console.log(cm);
                               $.each(cm.huifus,function (x,y){
                                  // $("#reply"+i).html(y.content);
                                   var rpl="<div class='col-md-12' id=\"replyUser"+i+"-"+x+"\" style='background-color: #F5F5F5'></div>" +
                                       "<div class='row' style='background-color: #F5F5F5'> " +
                                       "  <div class='col-md-11'><i class='bx bx-reply'></i><span id=\"reply"+i+"-"+x+"\"></span></div>" +
                                       "  <div class='col-md-1'>" +
                                       "    <div class='row'>" +
                                       "      <div class='col-md-6'>" +
                                       "        <img src='../static/myPicture/点赞.png' type='button' id='replyDianzanC"+i+"-"+x+"' onclick='replyDianzanC("+i+","+x+","+y.responseId+")' style='height: 20px;display: block'/>" +
                                       "        <img src='../static/myPicture/点赞1.png' type='button' id='replyDianzanD"+i+"-"+x+"' onclick='replyDianzanD("+i+","+x+","+y.responseId+")' style='height: 20px;display: none'/>" +
                                       "      </div>" +
                                       "      <div class='col-md-6'>" +
                                       "      (<span id='replyDianzanCount"+i+"-"+x+"'>0</span>)" +
                                       "      </div>" +
                                       "   </div>" +
                                       "  </div>" +
                                       "</div>" +
                                       "<hr width='100%'>";
                                   $("#replySpace"+i).append(rpl);
                                   $("#reply"+i+"-"+x).html(y.content);
                                   //通过userId获取回复人姓名并赋值
                                   $.ajax({
                                       url:"selectHuaTisFromUser",
                                       data: {"id":y.userId},
                                       dataType:"json",
                                       success:function(data){
                                           $("#replyUser"+i+"-"+x).html(data.abUser.userName);
                                       }
                                   });
                                   //为回复点赞数赋值
                                   dianzanResponseType(i,x,y.responseId);

                               });
                           }
                        });



                    });



                }
            });
        }
        //评论被点击时
        function inp(commentsId,topicId,userId){

              $("#ct").focus();
              $("#leixing").attr("value","reply");
              $("#cm").attr("value",commentsId);
              $("#tp").attr("value",topicId);
              $("#us").attr("value",userId);

        }
        //输入框失去焦点
        // $("#ct").blur(function (){
        //     $("#leixing").attr("value","comment");
        //
        //     $("#tp").attr("value",topicId);
        //     $("#us").attr("value",userId);
        // })

        //点击转换按钮由reply转换为comment
        $("#zhuanHuan").click(function (){
            $("#leixing").attr("value","comment");

            $("#tp").attr("value",topicId);
            $("#us").attr("value",userId);
        })
        //提交评论或回复
        $("#tiJiao").click(function () {
            if($("#leixing").val()=="reply"){
                $.ajax({
                    url:"addCommentHuiFu",
                    type:"post",
                    data:{"commentsId":$("#cm").val(),"topicId":$("#tp").val(),"userId":$("#us").val(),"content":$("#ct").val()},
                    dataType:"json",
                    success:function (res){
                        // alert("提交回复成功");
                        // location.reload();
                        $("#ct").val("");
                        $("#divComment").html("");
                        loadComments();
                    }
                }) ;

            }else if ($("#leixing").val()=="comment"){
                $.ajax({
                   url:"addComment",
                    type:"post",
                    data:{"topicId":$("#tp").val(),"userId":$("#us").val(),"content":$("#ct").val()},
                    success:function(res){
                        // alert("提交评论成功");
                        // location.reload();
                        $("#ct").val("");
                        $("#divComment").html("");
                        loadComments();
                    }
                });
            }

        });


        //给文章点赞
        $("#dianzan1").click(function(){
            $.ajax({
                url:"addHuaTiLike",
                data:{"userId":userId,"topicId":topicId},
                type:"post",
                dataType:"json",
                success:function(res){
                    dianzanType();

                }
            });

        });
        //删除文章的点赞
        $("#dianzan2").click(function(){
            $.ajax({
                url:"deleteHuaTilike",
                data:{"userId":userId,"topicId":topicId},
                type:"delete",
                dataType:"json",
                success:function(res){
                    dianzanType();

                }
            });

        });
        //查询话题是否能点赞
        function dianzanType(){
            $.ajax({
                url:"queryHuaTilike1",
                data:{"userId":userId,"topicId":topicId},
                dataType:"json",
                success:function(res){
                    if(res.huatilike==0){
                        $("#dianzan1").attr("style","display:block");
                        $("#dianzan2").attr("style","display:none");
                        $.ajax({
                            url:"queryHuaTilike",
                            data:{"topicId":topicId},
                            dataType:"json",
                            success:function(res){
                                $("#dianzanCount1").html(res.huatilike);
                            }
                        });
                    }else {
                        $("#dianzan1").attr("style","display:none");
                        $("#dianzan2").attr("style","display:block");
                        $.ajax({
                            url:"queryHuaTilike",
                            data:{"topicId":topicId},
                            dataType:"json",
                            success:function(res){
                                $("#dianzanCount2").html(res.huatilike);
                            }
                        });
                    }
                }
            });
        }


        //触发评论的点赞按钮
        function commentDianzanA(commentId,i){
            $.ajax({
                url:"addCommentLike",
                type:"post",
                data:{"userId":userId,"commentId":commentId},
                dataType:"json",
                success:function(res){
                    dianzanCommentType(commentId,i)

                }
            });
        }
        //删除评论的点赞
        function commentDianzanB(commentId,i){
            $.ajax({
                url:"deleteCommentlike",
                type:"delete",
                data:{"userId":userId,"commentId":commentId},
                dataType:"json",
                success:function(res){
                    dianzanCommentType(commentId,i)

                }
            });
        }
        //查询评论是否能被点赞
        function dianzanCommentType(commentId,i){
            $.ajax({
                url:"queryCommentlike1",
                data:{"userId":userId,"commentId":commentId},
                dataType:"json",
                success:function(res){
                    if(res.commentlike==0){
                        $("#commentDianzanA"+i).attr("style","height: 20px;display:block");
                        $("#commentDianzanB"+i).attr("style","height: 20px;display:none");
                        $.ajax({
                            url:"queryCommentlike",
                            data:{"commentId":commentId},
                            dataType:"json",
                            success:function(data){
                                $("#commentDianzanCount"+i).html(data.commentlike);
                            }
                        });
                    }else {
                        $("#commentDianzanA"+i).attr("style","height: 20px;display:none");
                        $("#commentDianzanB"+i).attr("style","height: 20px;display:block");
                        $.ajax({
                            url:"queryCommentlike",
                            data:{"commentId":commentId},
                            dataType:"json",
                            success:function(data){
                                $("#commentDianzanCount"+i).html(data.commentlike);
                            }
                        });
                    }
                }
            });
        }
        //触发回复的点赞按钮
        function replyDianzanC(i,x,responseId){
            $.ajax({
                url:"addHuiFuLike",
                type:"post",
                data:{"userId":userId,"responseId":responseId},
                dataType:"json",
                success:function(res){
                    dianzanResponseType(i,x,responseId);

                }
            });
        }
        //触发回复的删除点赞按钮
        function replyDianzanD(i,x,responseId){
            $.ajax({
                url:"deleteResponselike",
                type:"delete",
                data:{"userId":userId,"responseId":responseId},
                dataType:"json",
                success:function(res){
                    dianzanResponseType(i,x,responseId);

                }
            });
        }
        //查询回复是否能被点赞
        function dianzanResponseType(i,x,responseId){
            $.ajax({
                url:"queryResponselike1",
                data:{"userId":userId,"responseId":responseId},
                dataType:"json",
                success:function(res){
                    if(res.responselike==0){
                        $("#replyDianzanC"+i+"-"+x).attr("style","height: 20px;display:block");
                        $("#replyDianzanD"+i+"-"+x).attr("style","height: 20px;display:none");
                        $.ajax({
                            url:"queryResponselike",
                            data:{"responseId":responseId},
                            dataType:"json",
                            success:function(data){
                                $("#replyDianzanCount"+i+"-"+x).html(data.responselike);
                            }
                        });
                    }else {
                        $("#replyDianzanC"+i+"-"+x).attr("style","height: 20px;display:none");
                        $("#replyDianzanD"+i+"-"+x).attr("style","height: 20px;display:block");
                        $.ajax({
                            url:"queryResponselike",
                            data:{"responseId":responseId},
                            dataType:"json",
                            success:function(data){
                                $("#replyDianzanCount"+i+"-"+x).html(data.responselike);
                            }
                        });
                    }
                }
            });
        }




    </script>
</html>